<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Image Compressor - QuickTools Hub</title><meta name="description" content="Compress images client-side"/><link rel="stylesheet" href="../css/style.css"/><link rel="icon" href="../assets/favicon.png"/></head><body><header class="header"><a class="brand" href="/"><span class="logo"></span><strong style="color:inherit">QuickTools Hub</strong></a><a class="home-btn" href="/">Home</a></header><main class="container">
<div class="tool-area"><h1>Image Compressor</h1><p class="small">Compress images (JPG/PNG/WebP) in your browser. Files never leave your device.</p>
<div class="upload" id="dropArea">Drag & drop or click to choose images<input type="file" id="ic_files" accept="image/*" multiple style="display:none"/></div>
<div style="margin-top:12px">Quality: <input id="ic_quality" type="range" min="0.1" max="1" step="0.05" value="0.8"/> <button id="ic_compress" class="home-btn" disabled style="background:var(--accent)">Compress</button></div>
<div id="ic_results"></div></div>
<script>
const dropArea = document.getElementById('dropArea'), icFiles=document.getElementById('ic_files'), icCompress=document.getElementById('ic_compress'), icResults=document.getElementById('ic_results');
let ic_list=[];
dropArea.addEventListener('click', ()=> icFiles.click());
dropArea.addEventListener('dragover', e=>{ e.preventDefault(); dropArea.style.background='rgba(61,164,171,0.04)'; });
dropArea.addEventListener('dragleave', ()=> dropArea.style.background='');
dropArea.addEventListener('drop', e=>{ e.preventDefault(); dropArea.style.background=''; handleFiles(Array.from(e.dataTransfer.files)); });
icFiles.addEventListener('change', ()=> handleFiles(Array.from(icFiles.files)));
function handleFiles(files){ files.forEach(f=>{ if(!f.type.startsWith('image/')) return; ic_list.push(f); const p=document.createElement('div'); p.className='meta'; p.innerHTML=`<div class="kv">${f.name}</div><div class="kv">${(f.size/1024).toFixed(1)} KB</div>`; icResults.appendChild(p); }); if(ic_list.length) icCompress.disabled=false; }
icCompress.addEventListener('click', async ()=>{ if(!ic_list.length) return; icCompress.disabled=true; icCompress.textContent='Working...'; icResults.innerHTML=''; for(const f of ic_list){ const data=await readFileAsDataURL(f); const img=new Image(); img.src=data; await new Promise(r=>img.onload=r); const canvas=document.createElement('canvas'); const max=1600; const ratio=Math.min(1, max/img.width); canvas.width=Math.round(img.width*ratio); canvas.height=Math.round(img.height*ratio); const ctx=canvas.getContext('2d'); ctx.drawImage(img,0,0,canvas.width,canvas.height); const quality=parseFloat(document.getElementById('ic_quality').value); const blob = await new Promise(res=>canvas.toBlob(res,'image/jpeg',quality)); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='compressed-'+f.name; const im=document.createElement('img'); im.src=url; im.className='preview'; a.appendChild(im); const info=document.createElement('div'); info.className='meta'; info.innerHTML=`<div class="kv">Before: ${(f.size/1024).toFixed(1)} KB</div><div class="kv">After: ${(blob.size/1024).toFixed(1)} KB</div>`; icResults.appendChild(a); icResults.appendChild(info); URL.revokeObjectURL(url); } icCompress.textContent='Compress'; icCompress.disabled=false; ic_list=[]; });
</script>
</main><footer class="footer"><div>Â© 2025 QuickTools Hub</div></footer><script src="../js/common.js"></script></body></html>